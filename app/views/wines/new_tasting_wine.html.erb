<%= render partial: "shared/title", locals: {title: "New Wine"} %>

<div class="card mb-4">

  <div class="card-block">
      <h4 class="card-title">Create New Wine</h4>
    <%= form_for @wine, url: tasting_wines_path(@tasting, @wine) do |f| %>
      <% if @wine.errors.any? %>
        <div id="error_explanation" class="alert alert-danger">
          <h5><%= pluralize(tasting.errors.count, "error") %> prohibited this tasting from being saved:</h5>
          <ul>
          <% tasting.errors.full_messages.each do |message| %>
            <li><%= message %></li>
          <% end %>
          </ul>
        </div>
      <% end %>
      <div class="form-group">
        <%= f.label :vintage, class: "form-label" %> <small>(0 = Non-Vintage)</small>
        <%= f.number_field :vintage, class: "form-control", step: 1 %>
      </div>
      <div class="form-group">
        <%= f.label :name, class: "form-label" %>
        <%= f.text_field :name, class: "form-control", placeholder: "Producer Region/Vineyard/Name Varietal" %>
      </div>
      <div class="form-group">
        <%= f.label :price, class: "form-label" %>
        <%= f.number_field :price, class: "form-control", step: 0.01 %>
      </div>
      <div class="form-group">
        <%= f.submit "Submit", class: "btn btn-primary btn-block btn-lg" %>
      </div>
    <% end %>
  </div>
</div>

<div class="card mb-4">
  <div class="card-block">
    <h4 class="card-title">Select Existing Wine</h4>
    <div class="list-group">
      <% @wines.each do |w| %>
        <%= link_to w.full_name, tasting_tasting_wines_path({tasting_wine: {tasting_id: @tasting.id, wine_id: w.id}}), class: "list-group-item list-group-item-action", method: :post %>
      <% end %>
    </div>
  </div>
</div>

<%= link_to "Back", edit_tasting_path(@tasting), class:"btn btn-secondary" %>
